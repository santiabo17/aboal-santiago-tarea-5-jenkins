version: '3.8'

services:
  jmeter-master:
    image: justb4/jmeter:latest
    container_name: jmeter-performance
    user: "0"
    volumes:
      - ${JENKINS_WORKSPACE_PATH}/test-plans:/test-plans
      - ${JENKINS_WORKSPACE_PATH}/results:/results
      - ${JENKINS_WORKSPACE_PATH}/config:/config
    command: >
      -n -t /test-plans/api-performance.jmx
      -l /results/results.jtl
      -e -o /results/html-report
      -Jthreads=50
      -Jrampup=120
      -Jbase.url=httpbin.org